## DEPENDENCIAS UTILIZADAS:

    npm install react react-dom react-router-dom redux react-redux @reduxjs/toolkit bootstrap
    npm install --save-dev @types/react @types/react-dom @types/react-router-dom @types/redux @types/react-redux @types/bootstrap

    -Creaci√≥n de los primeros componenetes y p√°ginas: NavBar y Home 
    -Creaci√≥n de la carpeta rutas y definici√≥n de las rutas
    -Creaci√≥n del componente Login

     * Apartir de aqui ya empiezo a contruir el backend ya que Login ya requiere uso del servidor y una base de datos

     -Inicializaci√≥n de un proyecto de Node dentro de la carpeta backend: 

        1- npm init -y    (craci√≥n del package.json para instalar las dependencias)

        2- Instalaci√≥n de dependencias:
                -express: Para crear tu servidor.
                -cors: Para habilitar CORS, lo que permite que tu frontend se comunique con tu backend.
                -multer: Para manejar la carga de archivos (im√°genes).
                -mongoose: Para interactuar con MongoDB.         ->IMPORTANTE: Mongoose, una librer√≠a de Node.js que facilita la interacci√≥n con MongoDB.<-
                -dotenv: Para manejar variables de entorno.
                -axios para realizar peticiones asincronas al servidor, tambi√©n se puede utilizar fetch de forma nativa en React

                Dependencias: npm install express cors multer mongoose dotenv axios
        
        3- Configurar TypeScript para Node.js:

            npm install --save-dev typescript @types/node @types/express @types/cors @types/multer
        
        4- Crea un archivo de configuraci√≥n de TypeScript:

            npx tsc --init   (crear√° el archivo tsconfig.json)

            Ajusta el archivo tsconfig.json para compilar a JavaScript para Node.js. Aseg√∫rate de establecer "target" a "ES6" y "module" a "commonjs".

        5- Creaci√≥n del servidor express con las rutas:

            archivos server.ts y routesServer.ts

        6- importante si voy a utilizar el sistema de importaci√≥n de modulos de javascript ES Modules en el que se usa import definir :

             "type": "module", (en el archivo package.json)

            ya que node.js por defecto utiliza el sistema de modulos commonJs con require        

        7- COMPILACI√ìN DEL C√ìDIGO TYPESCRIPT A JAVASCRIPT (NODE.JS NECESITA HACER LA CONVERSI√ìN YA QUE NO INTERPRETA CODIGO TYPESCRIPT)
        
            Importante la estructura de carpetas y archivos para la configuraci√≥n 

            Ejecutar  (npx tsc) para convertir el c√≥digo typescript a javascript se crear√° autom√°ticamente una carpeta llamada dist

            para que no de errores y la carpeta se cree con el c√≥digo ya convertido a javascript para que node lo entienda hay que mantener la siguinete estructura:
            
                                server/
                ‚îú‚îÄ‚îÄ dist/                   # Carpeta que contendr√° el c√≥digo compilado (generado tras la compilaci√≥n)
                ‚îú‚îÄ‚îÄ node_modules/           # Carpeta de dependencias de Node.js
                ‚îú‚îÄ‚îÄ package.json            # Archivo de configuraci√≥n de npm
                ‚îú‚îÄ‚îÄ package-lock.json       # Archivo de bloqueo de versiones de npm
                ‚îú‚îÄ‚îÄ tsconfig.json           # Archivo de configuraci√≥n de TypeScript
                ‚îî‚îÄ‚îÄ src/                    # Carpeta que contiene el c√≥digo fuente en TypeScript
                    ‚îú‚îÄ‚îÄ server.ts           # Archivo principal del servidor
                    ‚îî‚îÄ‚îÄ routerServer.ts     # Archivo de rutas del servidor

            Importante tambi√©n indicar en el archivo tsconfig.json donde se encuentran los archivos con c√≥digo .ts para poder encontrarlos y convertirlos :

            
                            {
                "compilerOptions": {
                    "target": "ES2016",                               
                    "module": "ESNext",                               /* Usa ES Modules en lugar de CommonJS */
                    "moduleResolution": "node",                       /* Usa la resoluci√≥n de m√≥dulos de Node.js */
                    "esModuleInterop": true,                          /* Facilita la interoperabilidad entre m√≥dulos ES y CommonJS */
                    "forceConsistentCasingInFileNames": true,         /* Asegura que los nombres de archivo sean consistentes en los imports */
                    "strict": true,                                   /* Habilita las opciones de verificaci√≥n de tipos estrictas */
                    "skipLibCheck": true,                             /* Omite la comprobaci√≥n de tipos en archivos de definici√≥n de biblioteca */
                    "outDir": "./dist",                               /* Especifica la carpeta de salida para los archivos compilados */
                    "rootDir": "./src"                                /* Especifica la carpeta ra√≠z de los archivos fuente (contiene los archivos .ts)*/
                },
                "include": ["src"],                                 /* Incluye la carpeta de c√≥digo fuente (contiene los archivos .ts)*/
                "exclude": ["node_modules"]                         /* Excluye la carpeta node_modules */
                }   

        8- Arranque del servidor    

            node dist/server.js   (ejecutar en ruta server)

        9- MUY IMPORTANTE todos los archivos del backend que contengan c√≥digo .ts es decir, carpeta de controllers y models tiene que ir dentro de src que es la ubicaci√≥n dada en la configuraci√≥n    

            Una vez avanza el proceso de login para registrar un usuario y tenemos los archivos controller y model del login hace falta una base de datos 

        10- Vamos a usar MongoDB Atlas para la base de datos en la nube y Mongoose como ODM (Object Data Modeling) para interactuar con MongoDB desde tu aplicaci√≥n de Node.js.

        instalaci√≥n: npm install mongoose


        11- En este proyecto utilizar√© redux-persist para mantener las sesiones iniciadas y datos consistentes como la foto de login y el nombre:

            Instalaci√≥n de redux-persist:  

            Instalaci√≥n de tipos para redux-persist: npm install --save-dev @types/redux-persist (en caso de usar typescript)

        *Nota para que carguen las im√°genes correctamente definir la ruta adecuada en routesServer.ts: (solo funciona si la carpeta la creamos dentro de dist)
            dist en donde se almacena el c√≥digo compilado de ts a js para que node.js pueda entenderlo y ejecutarlo
            
            // Configuraci√≥n de almacenamiento para multer
            const storage = multer.diskStorage({
                destination: path.join(__dirname, '../dist/uploads'), // Guardar im√°genes en "uploads"
                filename: (req, file, cb) => {
                    cb(null, `${Date.now()}-${file.originalname}`); // Nombre √∫nico para cada archivo
                },
            });    



########PROCESO DE ARRANQUE DEL PROYECTO :########

    1.Arrancar el servidor Express:

        C:\Users\David\Desktop\Proyectos personales con React\beyound_the_pages\server> node dist/server.js


    2. Activar la Compilaci√≥n Autom√°tica con Modo de Vigilancia: compilaci√≥n de archivos .ts de la carpeta src a .js en la carpeta dist

        npx tsc --watch (dentro de server)

        
    3. Levantar el Servidor de Desarrollo de React: (dentro de la carpeta client en el Frontend)

        C:\Users\David\Desktop\Proyectos personales con React\beyound_the_pages\client> npm run dev



       
## PARA POR DESPLEGAR UN PROYECTO FULLSTACK CON UN SERVIDOR Y UN BACKEND EN VERCEL ##

1.cambiar todas las peticiones que actualmente apuntan a tu servidor local (localhost o 127.0.0.1) en tu frontend y
redirigirlas a la URL de tu servidor que est√° alojado en Vercel:

    // Antes (cuando estaba en local)
    fetch('http://localhost:5000/api/books')
    .then(response => response.json())
    .then(data => console.log(data));

    // Despu√©s (ahora en producci√≥n en Vercel)
    fetch('https://your-vercel-app.vercel.app/api/books')
    .then(response => response.json())
    .then(data => console.log(data));

2.Usa Variables de Entorno: Para facilitar la transici√≥n entre entornos (desarrollo y producci√≥n), puedes usar variables de entorno. 
As√≠ no tendr√°s que cambiar manualmente las URLs cada vez que pases de un entorno a otro.

    const API_URL = process.env.REACT_APP_API_URL || 'http://localhost:5000';

    fetch(`${API_URL}/api/books`)
    .then(response => response.json())
    .then(data => console.log(data));

3.Esquema de Comunicaci√≥n Frontend-Servidor en Vercel

    +--------------------+        HTTP Request         +------------------------+       Database Access      +---------------------+
|  React Frontend    |   --------------------->    |  Express Backend (Vercel)|   --------------------->   |   MongoDB Atlas      |
|  (Vercel)          |                              |  API Endpoints          |                             |  (Cloud)             |
|                    |   <---------------------    |  Serveless Functions     |   <---------------------   |                     |
+--------------------+        HTTP Response         +------------------------+       Query Results         +---------------------+


Flujo de Comunicaci√≥n:

1-React Frontend (cliente):

    El frontend de React est√° desplegado en Vercel como un sitio est√°tico.
    El usuario interact√∫a con la interfaz.
    Cuando el usuario necesita datos (como libros desde Google Books o tu base de datos), se realiza una petici√≥n HTTP desde el frontend al backend (Express) tambi√©n alojado en Vercel.

2-Express Backend (servidor):

    El backend es un servidor Express configurado como servidor sin estado (serverless) en Vercel. Esto significa que cada endpoint es manejado como una funci√≥n independiente, desplegada y gestionada por Vercel.
    El backend procesa la petici√≥n, por ejemplo, buscando libros o accediendo a la base de datos MongoDB Atlas.
    Responde al frontend con los datos necesarios (en JSON, por ejemplo).

3-MongoDB Atlas (base de datos):

    El backend se conecta remotamente a MongoDB Atlas para realizar las consultas necesarias a la base de datos.
    La base de datos responde con los datos, que son enviados de vuelta al frontend a trav√©s del servidor Express.



    ## AHORA EL PROYECTO TIENE EL MODO PRODUCCI√ìN Y EL MODO DESARROLLO ##

    "scripts": {
  "dev": "vite",                           // Para desarrollo
  "build": "tsc -b && vite build",         // Para construir el frontend y backend para producci√≥n
  "start": "vite preview",                 // Para servir la versi√≥n de producci√≥n
  "preview": "vite preview",               // Para previsualizar la versi√≥n de producci√≥n localmente
  "lint": "eslint ."
}

-npm run dev: Ejecuta un servidor de desarrollo local con recarga en caliente y herramientas de depuraci√≥n, para trabajar en el proyecto(development mode).

-npm run preview: Ser√° √∫til cuando desees previsualizar la producci√≥n localmente antes de desplegarla.

-npm run build: Construye la aplicaci√≥n para producci√≥n (optimizada, lista para desplegar).

-npm start: Ahora servir√° la aplicaci√≥n en modo de producci√≥n. Esto es lo que usar√≠as al desplegar o para simular el entorno de producci√≥n.



## MUY IMPORTANTE PARA PERMITIR ACCESO A MI BASE DE DATOS MONGO DB CUANDO LA API ESTA ALOJADA EN VERCEL ##

    Para permitir que tu aplicaci√≥n desplegada en Vercel (o cualquier otro servicio de hosting) se conecte correctamente a MongoDB Atlas, debes cambiar 
    la configuraci√≥n de acceso en MongoDB de la siguiente manera:

    Permitir conexiones desde cualquier IP:

    En el panel de MongoDB Atlas, ve a la secci√≥n de Network Access.
    Haz clic en Add IP Address.
    En el cuadro de di√°logo, selecciona la opci√≥n Allow access from anywhere. Esto a√±adir√° 0.0.0.0/0, lo que permitir√° que cualquier direcci√≥n IP 
    (incluidas las direcciones IP de Vercel) se conecte a tu cl√∫ster.


    
<!-- name_proyect
  /client  
    /dist
        index...css
        index...js
      /assets
    index.html  
    /node_modules
    /public
      index.html
    /src
      /assets  
      /components  
      /pages  
      /redux
      /routes
    App.tsx
    main.tsx
    package.json
    ...
  /server
    /dist
    /node_modules
    /src
      -config
      -controllers
      -models
      -services
  vercel.json


-->
    

    ##MUY IMPORTANTE PARA PODER DESPLEGAR EL PROYECTO BACKEND A PRODUCCION##

*Captura de la terminal de VSC

    PS C:\Users\David\Desktop\Proyectos personales con React\beyound_the_pages\client> npm install

up to date, audited 198 packages in 7s

43 packages are looking for funding

1 high severity vulnerability

To address all issues, run:
  npm audit fix

Run `npm audit` for details.
PS C:\Users\David\Desktop\Proyectos personales con React\beyound_the_pages\client> npm audit
# npm audit report

rollup  4.0.0 - 4.22.3
Severity: high
fix available via `npm audit fix`
node_modules/rollup

1 high severity vulnerability

To address all issues, run:
  npm audit fix

changed 3 packages, and audited 198 packages in 5s

43 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
PS C:\Users\David\Desktop\Proyectos personales con React\beyound_the_pages\client> vercel --prod
Vercel CLI 37.6.0
? Set up and deploy ‚Äú~\Desktop\Proyectos personales con React\beyound_the_pages\client‚Äù? yes
? Which scope do you want to deploy to? David's projects
? Link to existing project? yes
? What‚Äôs the name of your existing project? beyond-the-pages
üîó  Linked to davids-projects-5a52dd2e/beyond-the-pages (created .vercel and added it to .gitignore)
üîç  Inspect: https://vercel.com/davids-projects-5a52dd2e/beyond-the-pages/4ZgxkgMrG66MSj2WQrrMBMg5DevX [5s]
‚úÖ  Production: https://beyond-the-pages-leqigj3o5-davids-projects-5a52dd2e.vercel.app [5s]
PS C:\Users\David\Desktop\Proyectos personales con React\beyound_the_pages\client>

Comandos de Vercel CLI
Al ejecutar comandos de Vercel como vercel o vercel --prod, la CLI genera y utiliza el directorio .vercel para gestionar tu proyecto. Aqu√≠ hay un resumen de algunos comandos comunes:

vercel: Despliega tu aplicaci√≥n y crea una nueva URL para el entorno de previsualizaci√≥n.
vercel --prod: Despliega tu aplicaci√≥n en producci√≥n, actualizando la URL de producci√≥n.



*nota: Esto es porque el frontend (donde haces las solicitudes) est√° corriendo 
en https://beyond-the-pages-leqigj3o5-davids-projects-5a52dd2e.vercel.app y el backend (la API) est√° en https://beyond-the-pages-three.vercel.app.


¬°Excelente! Has completado el despliegue inicial de tu proyecto en Vercel. Vamos a desglosar lo que ves y qu√© pasos debes seguir a continuaci√≥n.

### An√°lisis del Resultado

1. **Vercel CLI**: La l√≠nea `Vercel CLI 37.6.0` indica la versi√≥n del CLI de Vercel que est√°s utilizando. Es bueno mantenerlo actualizado, pero esta versi√≥n es completamente funcional.

2. **Enlace de Inspecci√≥n**: 
   - `üîç  Inspect: https://vercel.com/davids-projects-5a52dd2e/beyond-the-pages/8n1CReto9s5iJ2xqigi1rcBtarNv`
   - Este enlace te lleva a la interfaz de Vercel donde puedes ver los detalles del despliegue actual. Puedes ver informaci√≥n sobre los logs, configuraciones y el estado del proyecto.

3. **Enlace de Vista Previa**:
   - `‚úÖ  Preview: https://beyond-the-pages-6devgc4kk-davids-proyectos-5a52dd2e.vercel.app`
   - Este es el enlace donde puedes ver tu aplicaci√≥n en acci√≥n. Es una versi√≥n de vista previa, que puedes usar para probar tu aplicaci√≥n antes de hacer el despliegue final a producci√≥n.

4. **Instrucciones para Despliegue a Producci√≥n**:
   - `üìù  To deploy to production (beyond-the-pages-seven.vercel.app), run vercel --prod`
   - Aqu√≠, Vercel te est√° dando instrucciones para desplegar tu aplicaci√≥n en producci√≥n. El comando `vercel --prod` publicar√° tu aplicaci√≥n en la URL final de producci√≥n.

### Pasos a Seguir

Ahora que has realizado un despliegue de vista previa, puedes proceder a los siguientes pasos:

#### 1. Revisa la Aplicaci√≥n en Vista Previa
- Abre el enlace de vista previa en tu navegador: [Vista Previa de tu aplicaci√≥n](https://beyond-the-pages-6devgc4kk-davids-proyectos-5a52dd2e.vercel.app).
- Aseg√∫rate de que todo funcione como se espera. Verifica que todas las p√°ginas, im√°genes, enlaces y funcionalidades est√©n operativas.
- Comprueba la consola del navegador para detectar cualquier error de JavaScript o advertencias.

#### 2. Despliegue a Producci√≥n
Una vez que est√©s satisfecho con la vista previa y todo est√© funcionando correctamente, puedes proceder a desplegarlo en producci√≥n. Haz lo siguiente:

- En la terminal, ejecuta el siguiente comando:

   ```bash
   vercel --prod
   ```

- Este comando realizar√° el despliegue en la URL de producci√≥n, que normalmente es algo como `https://beyond-the-pages-<alg√∫n-id>.vercel.app`, o si ya existe, puede utilizar un nombre que hayas definido anteriormente.

#### 3. Verifica el Despliegue de Producci√≥n
- Despu√©s de ejecutar el comando anterior, espera a que Vercel complete el despliegue. Una vez finalizado, te dar√° un enlace de producci√≥n.
- Visita ese enlace en tu navegador y realiza las mismas verificaciones que hiciste con la vista previa.

#### 4. Manejo de Errores (si ocurren)
- Si encuentras alg√∫n error durante el despliegue o en la versi√≥n de producci√≥n:
  - Puedes ver los logs para m√°s informaci√≥n utilizando:

   ```bash
   vercel logs <tu-dominio>
   ```

  - Revisa el enlace de inspecci√≥n que te proporcion√≥ Vercel para ver m√°s detalles sobre cualquier error que pueda haber ocurrido.

### Consideraciones Finales

- **Revisar Configuraciones de Producci√≥n**: Aseg√∫rate de que todas las configuraciones necesarias, como variables de entorno y configuraciones de API, est√©n configuradas correctamente en el panel de control de Vercel.
- **Mantenimiento**: Despu√©s del despliegue, recuerda que puedes hacer cambios en tu c√≥digo, y luego puedes volver a ejecutar `vercel` o `vercel --prod` para desplegar nuevas versiones.

Si todo se ve bien y funciona correctamente, ¬°tu aplicaci√≥n deber√≠a estar en vivo! Si tienes m√°s preguntas o necesitas m√°s ayuda, no dudes en preguntar.


## √öLTIMO DESPLIEGUE EN VERCEL ##

PS C:\Users\David\Desktop\Proyectos personales con React\beyound_the_pages\client> vercel --prod        
Vercel CLI 37.6.0
üîç  Inspect: https://vercel.com/davids-projects-5a52dd2e/beyond-the-pages/7Pewf2ThTLoaxr4zYsJq7sFPNndV [2s]
‚úÖ  Production: https://beyond-the-pages-kporvhnyh-davids-projects-5a52dd2e.vercel.app [2s]
PS C:\Users\David\Desktop\Proyectos personales con React\beyound_the_pages\client> 